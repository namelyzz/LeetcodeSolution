# é¢˜å•

[620. æœ‰è¶£çš„ç”µå½±](https://leetcode.cn/problems/not-boring-movies/)

[1251. å¹³å‡å”®ä»·](https://leetcode.cn/problems/average-selling-price/)

# é¢˜è§£

## [620. æœ‰è¶£çš„ç”µå½±](https://leetcode.cn/problems/not-boring-movies/)

```sql
select id, movie, description, rating
from cinema
where description != "boring" and id % 2 = 1
order by rating desc
```

<aside> ğŸ’¡

å¸¸è§çš„åˆ¤æ–­å¥‡æ•°æ–¹å¼

- mod(x, 2) = 1 ï¼Œå¦‚æœä½™æ•°æ˜¯ 1 å°±æ˜¯å¥‡æ•°ã€‚
- power(-1, x) = -1 ï¼Œ å¦‚æœç»“æœæ˜¯ -1 å°±æ˜¯å¥‡æ•°
- x % 2 = 1 ï¼Œå¦‚æœä½™æ•°æ˜¯ 1 å°±æ˜¯å¥‡æ•°ã€‚
- x & 1 = 1 ï¼Œå¦‚æœæ˜¯ 1 å°±æ˜¯å¥‡æ•°
- x regexp '[1, 3, 5, 7, 9]$' = 1 å¦‚æœä¸º 1 å°±æ˜¯å¥‡æ•°
- x>>1<<1 != x å¦‚æœå³ç§»ä¸€ä½åœ¨å·¦ç§»ä¸€ä½ä¸ç­‰äºåŸå€¼ï¼Œå°±æ˜¯å¥‡æ•° </aside>

## [1251. å¹³å‡å”®ä»·](https://leetcode.cn/problems/average-selling-price/)

```sql
select 
    p.product_id,
    ifnull(round((sum(p.price * u.units) / sum(u.units)), 2), 0) as average_price
from Prices p
left join UnitsSold u 
    on u.product_id = p.product_id 
    and u.purchase_date between p.start_date and p.end_date
group by p.product_id
```

<aside> ğŸ’¡

å¤ç›˜

1. å‘é„™çš„å‡ºé¢˜è€…ï¼Œä½ ä¸šåŠ¡éƒ½0é”€é‡äº†ï¼Œè¿˜æè¿™ç®—å‡ä»·ï¼Œå‡ä»·è¿˜å¡« 0ï¼Œå®åœ¨æ— è¯­ï¼Œå°±æ˜¯ä¸ºäº†æŒ–ä¸ª ifnull çš„å‘æ¥æ¶å¿ƒä¸€ä¸‹ï¼
   - æ‰€ä»¥**æ¶‰åŠåˆ°è”è¡¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œç‰¹åˆ«æ˜¯éœ€è¦è®¡ç®—çš„æ—¶å€™ï¼Œåˆ‡è®°åŠ ä¸Š ifnull æ¥ä¿é™©**ï¼ˆå‰é¢ä¸€èŠ‚é¢˜ç›®ä¹Ÿæœ‰è¿™ç§æƒ…å†µï¼Œä½†æ˜¯ null çš„æƒ…å†µå‡ºç°åœ¨ç¤ºä¾‹ä¸­ï¼Œè¿™é‡Œæ²¡æœ‰ï¼Œäºæ˜¯å°±å¿˜äº†ï¼Œæ‰€ä»¥è”è¡¨æŸ¥è¯¢å¦‚æœ null æœ‰æ„ä¹‰éœ€è¦èµ‹å€¼ï¼Œä¸€å®šè¦è€ƒè™‘ç”¨ä¸Š ifnull**ï¼‰**
2. è¡¨ä¹‹é—´çš„å…³è”å…³ç³»æ™•ä¹ä¹çš„
   - æˆ‘ç¬¬ä¸€æ¬¡å†™å¾—æ—¶å€™æ˜¯ from UnitsSold join Pricesï¼Œä¼šå› ä¸º UnitsSold æ˜¯ç©ºçš„ï¼Œç„¶åæ²¡æœ‰æ•°æ®
   - è¿˜æ˜¯å¿½ç•¥äº†è¡¨æè¿°ä¸­çš„`(product_idï¼Œstart_dateï¼Œend_date) æ˜¯ prices è¡¨çš„ä¸»é”®ï¼ˆå…·æœ‰å”¯ä¸€å€¼çš„åˆ—çš„ç»„åˆï¼‰ã€‚`
   - å·§çš„æ˜¯æˆ‘é—® AIï¼ŒAI ä¹Ÿæ˜¯ç”¨ UnitsSold è¡¨è¿æ¥ Prices è¡¨ï¼Œæ‰€ä»¥ä¹Ÿä¼šå‡ºç°æ¼æ•°æ®çš„æƒ…å†µ
   - æ„Ÿè§‰ä¸»è¦æ˜¯é¢˜ç›®å¤ªç»•äº†ï¼Œè€Œä¸”æŒ–å‘æ¶å¿ƒäºº </aside>